import{d as G,u as O,a as P,o as F,c as T,b as l,t as i,e as r,f as e,w as t,r as C,g as n,h as g,i as k,j as b,k as U,E as z,_ as L}from"./index-tSqb5k_b.js";const M={class:"liveapi-config"},j={class:"page-header"},D={class:"card-header"},J={class:"connections-list"},R={class:"connection-form"},W={class:"card-header"},q=G({__name:"LiveAPIConfig",setup(H){const{t:u}=O(),_=P(),c=C([]),d=C({address:"127.0.0.1",port:7777}),p=C(""),w=()=>{c.value.push({...d.value,status:"pending"})},I=()=>{_.send({type:"WRITE_CONFIG",connections:c.value.map(a=>({address:a.address,port:a.port}))}),z.success("Config written")},y=()=>{_.send({type:"GET_CONFIG"})};return F(()=>{_.subscribe("CONFIG",a=>{p.value=JSON.stringify(a.config,null,2),a.connections&&(c.value=a.connections)}),y()}),(a,o)=>{const N=n("el-empty"),m=n("el-table-column"),x=n("el-tag"),A=n("el-table"),h=n("el-input"),f=n("el-form-item"),E=n("el-input-number"),v=n("el-button"),S=n("el-form"),V=n("el-card"),B=n("el-icon");return g(),T("div",M,[l("div",j,[l("h2",null,i(r(u)("liveapi.title")),1)]),e(V,{class:"content-card"},{header:t(()=>[l("div",D,[l("span",null,i(r(u)("liveapi.currentConnections")),1)])]),default:t(()=>[l("div",J,[c.value.length===0?(g(),k(N,{key:0,description:"No connections"})):(g(),k(A,{key:1,data:c.value,stripe:""},{default:t(()=>[e(m,{prop:"address",label:"Address"}),e(m,{prop:"port",label:"Port",width:"100"}),e(m,{prop:"status",label:"Status",width:"120"},{default:t(({row:s})=>[e(x,{type:s.status==="connected"?"success":"info",size:"small"},{default:t(()=>[b(i(s.status),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"]))]),l("div",R,[e(S,{inline:!0},{default:t(()=>[e(f,{label:"Address"},{default:t(()=>[e(h,{modelValue:d.value.address,"onUpdate:modelValue":o[0]||(o[0]=s=>d.value.address=s),placeholder:"127.0.0.1"},null,8,["modelValue"])]),_:1}),e(f,{label:"Port"},{default:t(()=>[e(E,{modelValue:d.value.port,"onUpdate:modelValue":o[1]||(o[1]=s=>d.value.port=s),min:1,max:65535},null,8,["modelValue"])]),_:1}),e(f,null,{default:t(()=>[e(v,{type:"primary",onClick:w},{default:t(()=>[...o[3]||(o[3]=[b("Add",-1)])]),_:1})]),_:1})]),_:1})]),e(v,{type:"primary",onClick:I},{default:t(()=>[b(i(r(u)("liveapi.writeConfig")),1)]),_:1})]),_:1}),e(V,{class:"content-card"},{header:t(()=>[l("div",W,[l("span",null,i(r(u)("liveapi.currentConfig")),1),e(v,{size:"small",onClick:y},{default:t(()=>[e(B,null,{default:t(()=>[e(r(U))]),_:1})]),_:1})])]),default:t(()=>[e(h,{modelValue:p.value,"onUpdate:modelValue":o[2]||(o[2]=s=>p.value=s),type:"textarea",rows:10,readonly:"",class:"config-display"},null,8,["modelValue"])]),_:1})])}}}),Q=L(q,[["__scopeId","data-v-e54fb9d8"]]);export{Q as default};
