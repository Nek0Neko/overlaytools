import{v as G,ay as O,j as P,B as z,E as l,R as d,u as r,C as e,D as t,r as C,ab as n,y as g,z as k,Q as y}from"./vue-vendor-CHJA6o4q.js";import{u as F,_ as T}from"./index-B_lCm9yO.js";import{r as U,f as D}from"./element-plus-DPYOyBEs.js";const L={class:"liveapi-config"},M={class:"page-header"},R={class:"card-header"},j={class:"connections-list"},J={class:"connection-form"},Q={class:"card-header"},W=G({__name:"LiveAPIConfig",setup(q){const{t:u}=O(),p=F(),c=C([]),i=C({address:"127.0.0.1",port:7777}),_=C(""),I=()=>{c.value.push({...i.value,status:"pending"})},N=()=>{p.send({type:"WRITE_CONFIG",connections:c.value.map(a=>({address:a.address,port:a.port}))}),D.success("Config written")},b=()=>{p.send({type:"GET_CONFIG"})};return P(()=>{p.subscribe("CONFIG",a=>{_.value=JSON.stringify(a.config,null,2),a.connections&&(c.value=a.connections)}),b()}),(a,o)=>{const w=n("el-empty"),m=n("el-table-column"),x=n("el-tag"),A=n("el-table"),h=n("el-input"),f=n("el-form-item"),B=n("el-input-number"),v=n("el-button"),E=n("el-form"),V=n("el-card"),S=n("el-icon");return g(),z("div",L,[l("div",M,[l("h2",null,d(r(u)("liveapi.title")),1)]),e(V,{class:"content-card"},{header:t(()=>[l("div",R,[l("span",null,d(r(u)("liveapi.currentConnections")),1)])]),default:t(()=>[l("div",j,[c.value.length===0?(g(),k(w,{key:0,description:"No connections"})):(g(),k(A,{key:1,data:c.value,stripe:""},{default:t(()=>[e(m,{prop:"address",label:"Address"}),e(m,{prop:"port",label:"Port",width:"100"}),e(m,{prop:"status",label:"Status",width:"120"},{default:t(({row:s})=>[e(x,{type:s.status==="connected"?"success":"info",size:"small"},{default:t(()=>[y(d(s.status),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"]))]),l("div",J,[e(E,{inline:!0},{default:t(()=>[e(f,{label:"Address"},{default:t(()=>[e(h,{modelValue:i.value.address,"onUpdate:modelValue":o[0]||(o[0]=s=>i.value.address=s),placeholder:"127.0.0.1"},null,8,["modelValue"])]),_:1}),e(f,{label:"Port"},{default:t(()=>[e(B,{modelValue:i.value.port,"onUpdate:modelValue":o[1]||(o[1]=s=>i.value.port=s),min:1,max:65535},null,8,["modelValue"])]),_:1}),e(f,null,{default:t(()=>[e(v,{type:"primary",onClick:I},{default:t(()=>[...o[3]||(o[3]=[y("Add",-1)])]),_:1})]),_:1})]),_:1})]),e(v,{type:"primary",onClick:N},{default:t(()=>[y(d(r(u)("liveapi.writeConfig")),1)]),_:1})]),_:1}),e(V,{class:"content-card"},{header:t(()=>[l("div",Q,[l("span",null,d(r(u)("liveapi.currentConfig")),1),e(v,{size:"small",onClick:b},{default:t(()=>[e(S,null,{default:t(()=>[e(r(U))]),_:1})]),_:1})])]),default:t(()=>[e(h,{modelValue:_.value,"onUpdate:modelValue":o[2]||(o[2]=s=>_.value=s),type:"textarea",rows:10,readonly:"",class:"config-display"},null,8,["modelValue"])]),_:1})])}}}),Y=T(W,[["__scopeId","data-v-e54fb9d8"]]);export{Y as default};
